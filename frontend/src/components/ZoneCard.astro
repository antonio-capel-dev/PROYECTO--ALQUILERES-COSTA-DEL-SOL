---
interface Props {
  nombre: string;
  slug: string;
  imagen?: string;
  descripcion?: string;
  cantidad?: number;
}

const { nombre, slug, imagen, descripcion, cantidad } = Astro.props;

// Estrategia de Fallback visual (Defensa Oral: "Experience Degradation Graceful")
const DEFAULT_IMAGE =
  "https://images.unsplash.com/photo-1569335466847-b8f362793152?auto=format&fit=crop&w=400&q=80";
const safeImage = imagen && imagen !== "" ? imagen : DEFAULT_IMAGE;
---

<a
  href={`/zona/${slug}`}
  class="group relative block aspect-video rounded-2xl overflow-hidden shadow-sm hover:shadow-xl transition-all duration-500 w-full"
  aria-label={`Ver alojamientos en ${nombre}`}
>
  {/* Capa de Imagen con Lazy Loading Nativo */}
  <img
    src={safeImage}
    alt={`Alquiler vacacional en ${nombre} - Costa del Sol`}
    loading="lazy"
    width="400"
    height="225"
    class="w-full h-full object-cover transform group-hover:scale-110 transition duration-700 ease-out bg-slate-200"
  />

  {/* Gradiente de legibilidad */}
  <div
    class="absolute inset-0 bg-linear-to-t from-black/80 via-black/20 to-transparent opacity-80 group-hover:opacity-90 transition-opacity"
  >
  </div>

  {/* Contenido Textual */}
  <div class="absolute bottom-4 left-4 text-white z-10 w-full pr-4">
    <h3 class="font-bold text-xl mb-1 text-balance leading-tight">
      {nombre}
    </h3>

    <div class="flex items-center justify-between">
      {
        descripcion && (
          <p class="text-xs text-slate-300 opacity-90 font-medium truncate max-w-[70%]">
            {descripcion}
          </p>
        )
      }

      {
        cantidad !== undefined && (
          <span class="text-xs bg-white/20 backdrop-blur-md px-2 py-0.5 rounded-full text-white border border-white/30">
            {cantidad} üè†
          </span>
        )
      }
    </div>
  </div>
</a>
